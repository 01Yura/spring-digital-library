spring.application.name=spring-digital-library

# ===============================
# НАСТРОЙКИ ПОДКЛЮЧЕНИЯ К БАЗЕ ДАННЫХ
# ===============================

# Настройки БД можно переопределить через переменные окружения:
# SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
# Или через .env файл в корне проекта
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/spring_digital_bookstore}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# ===============================
# НАСТРОЙКИ JPA / HIBERNATE
# ===============================

# Явно указываем диалект SQL для PostgreSQL.
# Hibernate будет:
# - использовать правильные типы данных
# - корректно создавать auto-increment поля
# - генерировать совместимые SQL-запросы
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Управляет генерацией схемы БД при старте приложения
# create       — ❗ УДАЛЯЕТ таблицы и создает заново
# update       — добавляет недостающие колонки (DEV)
# validate     — проверяет, но не создаёт
# none         — вообще ничего не делает
spring.jpa.hibernate.ddl-auto=create

# ===============================
# ЛОГИ SQL (ТОЛЬКО ДЛЯ DEV!)
# ===============================

# Показывает SQL-запросы, которые Hibernate отправляет в БД
# Например: CREATE TABLE, SELECT, INSERT
spring.jpa.show-sql=false

# Форматирует SQL-запросы в логах
# Без этого они идут в одну строку
spring.jpa.properties.hibernate.format_sql=true

# ===============================
# JWT НАСТРОЙКИ
# ===============================

jwt.secret=${JWT_SECRET}
# 50 minutes
jwt.expiration=3000000
# 24 hours  
jwt.refresh-expiration=86400000

# ===============================
# SWAGGER / OPENAPI НАСТРОЙКИ
# ===============================

springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# ===============================
# OPENAI API НАСТРОЙКИ
# ===============================

# OpenAI API ключ
# Можно переопределить через переменную окружения OPENAI_API_KEY
# ВАЖНО: Не коммитьте реальный ключ в репозиторий! Используйте переменную окружения.
openai.api.key=${OPENAI_API_KEY}




# ===============================
# НАСТРОЙКИ ЗАГРУЗКИ ФАЙЛОВ
# ===============================

# Максимальный размер файла (5MB)
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# ===============================
# НАСТРОЙКИ ПУТЕЙ ДЛЯ ИЗОБРАЖЕНИЙ КНИГ
# ===============================

# Путь для хранения изображений книг
# По умолчанию: путь для Windows (для локальной разработки)
# Можно переопределить через переменную окружения APP_IMAGES_STORAGE_PATH
# В Docker контейнере переменная APP_IMAGES_STORAGE_PATH автоматически устанавливается в /opt/spring-digital-bookstore/pictures
# Spring Boot также автоматически преобразует переменную окружения APP_IMAGES_STORAGE_PATH в app.images.storage-path
app.images.storage-path=${APP_IMAGES_STORAGE_PATH:G:\\opt\\spring-digital-bookstore\\pictures}

# ===============================
# НАСТРОЙКИ ПУТЕЙ ДЛЯ PDF ФАЙЛОВ КНИГ
# ===============================

# Путь для хранения PDF файлов книг
# По умолчанию: путь для Windows (для локальной разработки)
# Можно переопределить через переменную окружения APP_PDF_STORAGE_PATH
# В Docker контейнере переменная APP_PDF_STORAGE_PATH автоматически устанавливается в /opt/spring-digital-bookstore/pdf
# Spring Boot также автоматически преобразует переменную окружения APP_PDF_STORAGE_PATH в app.pdf.storage-path
app.pdf.storage-path=${APP_PDF_STORAGE_PATH:G:\\opt\\spring-digital-bookstore\\pdf}