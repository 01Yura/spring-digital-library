# Swagger UI - Инструкция по использованию

## Доступ к Swagger UI

После запуска приложения Swagger UI будет доступен по адресу:

```
http://localhost:8080/swagger-ui.html
```

Или альтернативный путь:
```
http://localhost:8080/swagger-ui/index.html
```

## OpenAPI JSON

OpenAPI спецификация доступна по адресу:
```
http://localhost:8080/v3/api-docs
```

## Использование Swagger UI

### 1. Аутентификация

1. Откройте Swagger UI в браузере
2. Найдите раздел **"Аутентификация"**
3. Используйте эндпоинт `POST /api/v1/auth/login`:
   - Email: `admin@gmail.com`
   - Password: `admin`
4. Скопируйте полученный `token` из ответа
5. Нажмите кнопку **"Authorize"** (вверху справа)
6. Вставьте токен в поле (без слова "Bearer", только сам токен)
7. Нажмите **"Authorize"** и затем **"Close"**

Теперь вы можете тестировать защищенные эндпоинты!

### 2. Тестирование API

- Все эндпоинты сгруппированы по категориям (тегам)
- Каждый эндпоинт содержит:
  - Описание
  - Параметры запроса
  - Примеры запросов и ответов
  - Коды ошибок
  - Требования к авторизации

### 3. Примеры использования

#### Создание книги (требуется роль ADMIN)

1. Убедитесь, что вы авторизованы как ADMIN
2. Найдите раздел **"Администрирование книг"**
3. Выберите `POST /api/v1/admin/books`
4. Нажмите **"Try it out"**
5. Заполните JSON тело запроса:
```json
{
  "title": "Spring Boot Guide",
  "authorName": "John Smith",
  "description": "Comprehensive guide to Spring Boot",
  "publishedYear": 2024,
  "isbn": "978-0-123456-78-9"
}
```
6. Нажмите **"Execute"**

#### Создание отзыва

1. Авторизуйтесь как USER или ADMIN
2. Найдите раздел **"Отзывы"**
3. Выберите `POST /api/v1/books/{bookId}/reviews`
4. Укажите `bookId` (например, 1)
5. Заполните тело запроса:
```json
{
  "text": "Отличная книга! Очень рекомендую."
}
```
6. Выполните запрос

#### Постановка рейтинга

1. Найдите раздел **"Рейтинги"**
2. Выберите `POST /api/v1/books/{bookId}/ratings`
3. Укажите `bookId`
4. Заполните тело запроса:
```json
{
  "value": 8
}
```
5. Выполните запрос

## Особенности

- **Автоматическая документация**: Все эндпоинты автоматически документируются
- **Примеры**: Каждый DTO содержит примеры значений
- **Валидация**: Показываются все правила валидации
- **Безопасность**: JWT токены можно вводить через кнопку "Authorize"
- **Тестирование**: Можно тестировать API прямо из браузера

## Настройки

Настройки Swagger находятся в `application.properties`:

```properties
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
```

## Примечания

- Swagger UI доступен без авторизации (для удобства разработки)
- Все защищенные эндпоинты требуют JWT токен
- Токен действителен 24 часа (86400000 мс)
- Для продакшена рекомендуется отключить Swagger UI

